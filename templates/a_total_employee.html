<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Total seekers</title>
    <style>
        .thumbnail {
            width: 150px;
            height: 150px;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid #ccc;
            border-radius: 8px;
            transition: border 0.2s;
        }
        .thumbnail:hover { border: 2px solid #333; }
        .search-box { margin: 20px 0; }
        input[type="text"] { padding: 8px; width: 250px; }
        button { padding: 8px 15px; margin: 5px; cursor: pointer; }
        .employee-card { border-bottom: 1px solid #ccc; padding: 10px; }
    </style>
</head>
<body>

<h2>Total Seekers</h2>
<a href="/admin_dashboard"><button>Go back</button></a>

<!-- 🔍 Search form -->
<form method="get" action="/2300/admin_dashboard/seeker" class="search-box">
    <input type="text" name="q" placeholder="Search by name, email, or status"
            value="{{ search_query or '' }}">
    <button type="submit">Search</button>
    {% if search_query %}
        <a href="/2300/admin_dashboard/seeker"><button type="button">Clear</button></a>
    {% endif %}
</form>

{% for employee in employees %}
<div class="employee-card">
    {% if employee.resume_base64 %}
        <img src="data:image/jpeg;base64,{{ employee.resume_base64 }}"
                class="thumbnail"
                onclick="showModal(this)"
                style="width: 100px; height: auto; margin: 10px;" />
        <br><br>
    {% endif %}
    <p>Employee name: {{ employee.name }}</p>
    <p>Email: {{ employee.email }}</p>
    <p>Status: {{ employee.status }}</p>

    <a href="{{ url_for('a_edit_profile_e', emp_id=employee.id)}}"><button>Edit</button></a>
    <a href="{{ url_for('a_view_e_details', emp_id=employee.id)}}"><button>View details</button></a>

    <form method="POST" action="{{ url_for('a_status_emp') }}">
        <input type="hidden" name="emp_id" value="{{ employee.id }}">
        <button onclick="return confirm('Block this employee?')" name="action" value="Block">Block</button>
        <button onclick="return confirm('Unblock this employee?')" name="action" value="UnBlock">UnBlock</button>
        <button onclick="return confirm('Delete this employee?')" name="action" value="delete">Delete</button>
    </form>
</div>
{% else %}
    <p>No employees found.</p>
{% endfor %}

<!-- Modal -->
<div id="imgModal" class="modal">
    <span class="close" id="closeBtn">&times;</span>
    <img class="modal-content" id="modalImg">
</div>

<script>
    function showModal(img) {
        var modal = document.getElementById("imgModal");
        var modalImg = document.getElementById("modalImg");
        modal.style.display = "block";
        modalImg.src = img.src;
    }
    document.getElementById("closeBtn").onclick = function() {
        document.getElementById("imgModal").style.display = "none";
    }
    document.getElementById("imgModal").onclick = function(event) {
        if (event.target === this) {
            this.style.display = "none";
        }
    }
</script>
</body>
</html>
